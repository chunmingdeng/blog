# https

## CA 证书是什么？

> CA（Certificate Authority，证书颁发机构）证书是指由一个可信赖的第三方实体——证书颁发机构（CA）签发的数字证书。这个证书用于验证某个实体（如网站、服务器或个人）的身份，并为加密通信提供基础。在公钥基础设施（PKI, Public Key Infrastructure）中，CA 扮演着核心角色。

::: tabs
@tab 主要用途

-   身份验证：确保通信双方的身份是可信的。例如，在访问 HTTPS 网站时，浏览器会检查该网站的 SSL/TLS 证书是否由受信任的 CA 签发。
    建立加密通道：通过使用非对称加密技术，使得数据可以在客户端和服务器之间安全传输，防止数据被窃听或篡改。
-   签名其他证书：除了直接颁发给最终用户的证书外，CA 还会签发中间证书。这些中间证书可以进一步签发更多的终端实体证书，形成一个证书链，最终链接回根 CA 证书。

@tab 根证书 vs 中间证书 vs 终端实体证书

-   根证书（Root Certificate）：这是整个信任链的基础，通常由 CA 自己持有并严格保护。它用来签发中间证书或直接签发某些高安全性需求的终端实体证书。
-   中间证书（Intermediate Certificate）：为了提高安全性，许多 CA 不会直接使用根证书来签发终端实体证书，而是先生成一个或多个中间证书，然后用这些中间证书来签发具体的终端实体证书。这样做的好处是一旦中间证书出现问题，只需吊销中间证书而不需要更换根证书。
-   终端实体证书（End-entity Certificate）：这是直接分配给用户、服务器或其他实体的证书，用于特定目的，比如保护一个网站的安全连接

@tab 在本地开发环境中的应用
当你使用工具如 mkcert 来创建本地开发环境的 HTTPS 证书时，实际上是在你的机器上创建了一个本地的 CA。这个本地 CA 会生成一个根证书和相应的私钥，然后用这个根证书（或者其生成的中间证书）来签发适用于你本地域名（如 localhost 或自定义的.test 域名）的终端实体证书。

为了让浏览器信任这些本地开发证书，你需要将本地 CA 的根证书（或中间证书）添加到系统的信任存储中。一旦系统信任了这个 CA，那么所有由该 CA 签发的证书都会自动被信任，从而避免了每次访问本地 HTTPS 服务时出现的安全警告。

@tab 如何处理 CA 证书的信任问题？
获取 CA 证书：如果你使用的是 mkcert 这样的工具，可以通过命令找到 CA 证书的位置：
```bash
mkcert -CAROOT
```
导入 CA 证书：将 CA 证书导入到操作系统的信任库中。对于 macOS，你可以使用“钥匙串访问”应用程序将证书导入到“系统”钥匙串，并设置为“始终信任”。    
验证配置：完成上述步骤后，重启浏览器并尝试访问本地的 HTTPS 地址，确认不再显示证书不受信任的警告。
:::

